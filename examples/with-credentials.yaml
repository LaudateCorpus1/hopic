phases:
  download:
    toolchain:
      - with-credentials:
          id: access_key
          type: string
      - download --api-key=${SECRET}

  build:
    toolchain:
      - with-credentials:
          id: license_file
          type: file
      - build --license-key=${SECRET_FILE}

  deploy:
    toolchain:
      - run-on-change: only
        with-credentials:
          id: artifactory_creds
          type: username-password
      - publish --user=${USERNAME} --password=${PASSWORD}
